<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Configurations on Tegola - Vector tile server (MVT)</title>
    <link>http://tegola.io/configuration/</link>
    <description>Recent content in Configurations on Tegola - Vector tile server (MVT)</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Tue, 30 Aug 2016 00:11:02 +0100</lastBuildDate>
    <atom:link href="http://tegola.io/configuration/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Configuration</title>
      <link>http://tegola.io/configuration/</link>
      <pubDate>Tue, 30 Aug 2016 00:11:02 +0100</pubDate>
      
      <guid>http://tegola.io/configuration/</guid>
      <description>

&lt;h2 id=&#34;overview&#34;&gt;Overview&lt;/h2&gt;

&lt;p&gt;The Tegola config file use &lt;a href=&#34;https://github.com/toml-lang/toml&#34;&gt;TOML&lt;/a&gt; syntax and is comprised of three primary sections:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#webserver&#34;&gt;Webserver&lt;/a&gt;: webserver configuration.&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#providers&#34;&gt;Providers&lt;/a&gt;: data provider configuration (i.e. PostGIS).&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#maps&#34;&gt;Maps&lt;/a&gt;: map configuration including map names, layers and zoom levels.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;webserver&#34;&gt;Webserver&lt;/h2&gt;

&lt;p&gt;The webserver part of the config has the following parameters:&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Param&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;Required&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;Default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;port&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;No&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;:8080&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;A string with the value for port.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;log_file&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;No&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;Location of a log file to write webserver logs to.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;log_format&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;No&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;{{.Time}}:{{.RequestIP}} —— Tile:{{.Z}}/{{.X}}/{{.Y}}&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;Log output format. The Default format can be rearranged as desired.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&#34;example-webserver-config&#34;&gt;Example Webserver config&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&#34;language-toml&#34;&gt;[webserver]
port = &amp;quot;:8080&amp;quot;
log_file = &amp;quot;/var/log/tegola/tegola.log&amp;quot;
log_format = &amp;quot;{{.Time}}:{{.RequestIP}} —— Tile:{{.Z}}/{{.X}}/{{.Y}}&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;providers&#34;&gt;Providers&lt;/h2&gt;

&lt;p&gt;The providers configuration tells Tegola where your data lives. Currently Tegola supports PostGIS as a data provider, but it&amp;rsquo;s positioned to support additional data providers. Data providers each have their own specific configuration, but all are required to have the following two config params:&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Param&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;name&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;User defined data provider name. This is used by map layers to reference the data provider.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;type&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;The type of data provider. (i.e. &amp;ldquo;postgis&amp;rdquo;)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;postgis&#34;&gt;PostGIS&lt;/h3&gt;

&lt;p&gt;In addition to the required &lt;code&gt;name&lt;/code&gt; and &lt;code&gt;type&lt;/code&gt; parameters, a PostGIS data provider has the following additional params:&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Param&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;Required&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;Default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;host&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Yes&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;The database host.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;port&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;No&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;5432&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;The port the database is listening on.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;database&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Yes&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;The name of the database&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;user&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Yes&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;The database user&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;password&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Yes&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;The database user&amp;rsquo;s password&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;srid&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;No&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;3857&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;The default SRID for this data provider&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&#34;example-postgis-provider-config&#34;&gt;Example PostGIS Provider config&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&#34;language-toml&#34;&gt;[[providers]]
name = &amp;quot;test_postgis&amp;quot;   # provider name is referenced from map layers
type = &amp;quot;postgis&amp;quot;        # the type of data provider.
host = &amp;quot;localhost&amp;quot;      # postgis database host
port = 5432             # postgis database port
database = &amp;quot;tegola&amp;quot;     # postgis database name
user = &amp;quot;tegola&amp;quot;         # postgis database user
password = &amp;quot;&amp;quot;           # postgis database password
srid = 3857             # The default srid for this provider. If not provided it will be WebMercator (3857)
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;provider-layers&#34;&gt;Provider Layers&lt;/h2&gt;

&lt;p&gt;Provider Layers are referenced by &lt;a href=&#34;#map-layers&#34;&gt;Map Layers&lt;/a&gt; using the dot syntax &lt;code&gt;provder_name.provider_layer_name&lt;/code&gt; (i.e. &lt;code&gt;my_postgis.rivers&lt;/code&gt;). Provider Layers are required to have a &lt;code&gt;name&lt;/code&gt; and will typically have additional parameters which are specific to that Provider. A Provider Layer has the following top level configuration parameters:&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Param&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;Required&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;name&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Yes&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;The name that will be referenced from a map layer.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&#34;postgis-provider-layer&#34;&gt;PostGIS Provider Layer&lt;/h3&gt;

&lt;p&gt;PostGIS Provider Layers define how Tegola will fetch data for a layer form a &lt;a href=&#34;#postgis&#34;&gt;PostGIS&lt;/a&gt; Provider. The configuration requires either &lt;code&gt;tablename&lt;/code&gt; or &lt;code&gt;sql&lt;/code&gt; to be defined, but not both. The PostGIS Provider Layer has the following configuration prarameters:&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Param&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;Required&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;Default&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;tablename&lt;/strong&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Yes*&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;The name of the database table to query.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;sql&lt;/strong&gt;&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Yes*&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;Custom SQL. Requires a !BBOX! token&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;geometry_fieldname&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;No&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;geom&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;The name of the geometry field in the table&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;id_fieldname&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;No&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;gid&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;The name of the feature ID field in the table&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;srid&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;No&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;3857&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;The SRID for the table. Can be 3857 of 4326.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;fields&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;No&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;Fields to include as tag values. Useful when using &lt;strong&gt;tablename&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&amp;#42; Either &lt;code&gt;tablename&lt;/code&gt; or &lt;code&gt;sql&lt;/code&gt; is required, but not both.&lt;/p&gt;

&lt;h4 id=&#34;example-postgis-provider-layer-with-tablename-defined&#34;&gt;Example PostGIS Provider Layer with &lt;code&gt;tablename&lt;/code&gt; defined&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&#34;language-toml&#34;&gt;[[providers.layers]]
name = &amp;quot;landuse&amp;quot;                    # will be encoded as the layer name in the tile
tablename = &amp;quot;gis.zoning_base_3857&amp;quot;  # sql or table_name are required
geometry_fieldname = &amp;quot;geom&amp;quot;         # geom field. default is geom
id_fieldname = &amp;quot;gid&amp;quot;                # geom id field. default is gid
srid = 4326                         # the srid of table&#39;s geo data.
&lt;/code&gt;&lt;/pre&gt;

&lt;h4 id=&#34;example-postgis-provider-layer-with-sql-defined-notice-the-use-of-of-the-bbox-token-in-the-sql-statement&#34;&gt;Example PostGIS Provider Layer with &lt;code&gt;sql&lt;/code&gt; defined. Notice the use of of the &lt;code&gt;!BBOX!&lt;/code&gt; token in the SQL statement:&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&#34;language-toml&#34;&gt;[[providers.layers]]
name = &amp;quot;landuse&amp;quot;                    # will be encoded as the layer name in the tile
# Custom sql to be used for this layer. 
# Note that the geometery field is wraped in ST_AsBinary()
# as Tegola is expecting Well Known Binary (WKB) format.
sql = &amp;quot;&amp;quot;&amp;quot;
	SELECT
		gid,
		ST_AsBinary(geom) AS geom
	FROM
		gis.rivers
	WHERE
		geom &amp;amp;&amp;amp; !BBOX!
&amp;quot;&amp;quot;&amp;quot;
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;maps&#34;&gt;Maps&lt;/h2&gt;

&lt;p&gt;Tegola is responsible for serving vector map tiles, which are made up of numerous &lt;a href=&#34;#map-layers&#34;&gt;Map Layers&lt;/a&gt;. The name of the Map is used in the URL of all map tile requests (i.e. &lt;a href=&#34;http://tegola.io/endpoints/#maps-map-z-x-y&#34;&gt;/maps/:map_name/:z/:x/:y&lt;/a&gt;). Maps have the following configuration parameters:&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Param&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;Required&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;name&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Yes&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;The map that will be referenced in the URL (i.e. /maps/:map_name.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;pre&gt;&lt;code class=&#34;language-toml&#34;&gt;[[maps]]
name = &amp;quot;zoning&amp;quot;		# used in the URL to reference this map (/maps/:map_name)
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;map-layers&#34;&gt;Map Layers&lt;/h2&gt;

&lt;p&gt;Map Layers define which &lt;a href=&#34;#provider-layers&#34;&gt;Provider Layers&lt;/a&gt; to render at what zoom levels. Map Layers have the following configuration parameters:&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Param&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;Required&lt;/th&gt;
&lt;th align=&#34;right&#34;&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;provider_layer&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Yes&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;The name of the provider and provider layer using dot syntax. (i.e. my_postgis.rivers).&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;min_zoom&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;No&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;The minium zoom to render this layer at.&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;max_zoom&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;No&lt;/td&gt;
&lt;td align=&#34;right&#34;&gt;The maximum zoom to render this layer at.&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;h4 id=&#34;example-map-layer&#34;&gt;Example Map Layer&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&#34;language-toml&#34;&gt;[[maps.layers]]
provider_layer = &amp;quot;test_postgis.landuse&amp;quot; # must match a data provider layer
min_zoom = 12                       	# minimum zoom level to include this layer
max_zoom = 16                       	# maximum zoom level to include this layer
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;map-layer-default-tags&#34;&gt;Map Layer Default Tags&lt;/h2&gt;

&lt;p&gt;Map Layer Default Tags provide a convenient way to encode additional tags that are not supplied by a data provider. If a Defalt Tag is defined and the same tag is returned by the Provider, the Provider defined tage will take precedence.&lt;/p&gt;

&lt;p&gt;Default Tags are &lt;code&gt;key = value&lt;/code&gt; pairs.&lt;/p&gt;

&lt;h4 id=&#34;example-map-layer-default-tags&#34;&gt;Example Map Layer Default Tags&lt;/h4&gt;

&lt;pre&gt;&lt;code class=&#34;language-toml&#34;&gt;[maps.layers.default_tags]      
class = &amp;quot;park&amp;quot;			# a default tag to encode into the feature
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;full-config-example&#34;&gt;Full Config Example&lt;/h2&gt;

&lt;p&gt;The following config demonstrates the various concepts discussed above:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-toml&#34;&gt;[webserver]
port = &amp;quot;:9090&amp;quot;

# register data providers
[[providers]]
name = &amp;quot;test_postgis&amp;quot;   # provider name is referenced from map layers
type = &amp;quot;postgis&amp;quot;        # the type of data provider. currently only supports postgis
host = &amp;quot;localhost&amp;quot;      # postgis database host
port = 5432             # postgis database port
database = &amp;quot;tegola&amp;quot;     # postgis database name
user = &amp;quot;tegola&amp;quot;         # postgis database user
password = &amp;quot;&amp;quot;           # postgis database password
srid = 3857             # The default srid for this provider. If not provided it will be WebMercator (3857)

    # Example data
    [[providers.layers]]
    name = &amp;quot;landuse&amp;quot;                    # will be encoded as the layer name in the tile
    tablename = &amp;quot;gis.zoning_base_3857&amp;quot;  # sql or table_name are required
    geometry_fieldname = &amp;quot;geom&amp;quot;         # geom field. default is geom
    id_fieldname = &amp;quot;gid&amp;quot;                # geom id field. default is gid
    srid = 4326                         # the SRID of the geometry field if different than 

    [[providers.layers]]
    name = &amp;quot;roads&amp;quot;                      # will be encoded as the layer name in the tile
    tablename = &amp;quot;gis.zoning_base_3857&amp;quot;  # sql or table_name are required
    geometry_fieldname = &amp;quot;geom&amp;quot;         # geom field. default is geom
    id_fieldname = &amp;quot;gid&amp;quot;                # geom id field. default is gid
    fields = [ &amp;quot;class&amp;quot;, &amp;quot;name&amp;quot; ]        # Additional fields to include in the select statement.

    [[providers.layers]]
    name = &amp;quot;rivers&amp;quot;                     # will be encoded as the layer name in the tile
    # Custom sql to be used for this layer. 
    # Note that the geometery field is wraped in a ST_AsBinary()
    sql = &amp;quot;&amp;quot;&amp;quot;
        SELECT
            gid,
            ST_AsBinary(geom) AS geom
        FROM
            gis.rivers
        WHERE
            geom &amp;amp;&amp;amp; !BBOX!
    &amp;quot;&amp;quot;&amp;quot;

# maps are made up of layers
[[maps]]
name = &amp;quot;zoning&amp;quot;                             # used in the URL to reference this map (/maps/:map_name)

    [[maps.layers]]
    provider_layer = &amp;quot;test_postgis.landuse&amp;quot; # must match a data provider layer
    min_zoom = 12                           # minimum zoom level to include this layer
    max_zoom = 16                           # maximum zoom level to include this layer

        [maps.layers.default_tags]          # table of default tags to encode in the tile. SQL statements will override
        class = &amp;quot;park&amp;quot;

    [[maps.layers]]
    provider_layer = &amp;quot;test_postgis.rivers&amp;quot;  # must match a data provider layer
    min_zoom = 10                           # minimum zoom level to include this layer
    max_zoom = 18                           # maximum zoom level to include this layer
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
  </channel>
</rss>